(function(e){function n(n){for(var i,o,s=n[0],c=n[1],h=n[2],d=0,u=[];d<s.length;d++)o=s[d],a[o]&&u.push(a[o][0]),a[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(n);while(u.length)u.shift()();return r.push.apply(r,h||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],i=!0,s=1;s<t.length;s++){var c=t[s];0!==a[c]&&(i=!1)}i&&(r.splice(n--,1),e=o(o.s=t[0]))}return e}var i={},a={app:0},r=[];function o(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=i,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)o.d(t,i,function(n){return e[n]}.bind(null,i));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=n,s=s.slice();for(var h=0;h<s.length;h++)n(s[h]);var l=c;r.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("cd49")},"5c48":function(e,n,t){},"7c55":function(e,n,t){"use strict";var i=t("5c48"),a=t.n(i);a.a},cd49:function(e,n,t){"use strict";t.r(n);t("cadf"),t("551c"),t("f751"),t("097d");var i=t("2b0e"),a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("canvas",{attrs:{id:"canvas"}})},r=[],o=(t("7f7f"),t("ac4d"),t("8a81"),t("ac6a"),t("d225")),s=t("b0b4"),c=t("308d"),h=t("6bb5"),l=t("4e2b"),d=t("9ab4"),u=t("60a3"),m=t("5a89"),f=t("4721"),w=t("34ad"),p=function(e){function n(){var e;return Object(o["a"])(this,n),e=Object(c["a"])(this,Object(h["a"])(n).apply(this,arguments)),e.cameraDistance=100,e.near=.1,e.far=1e3,e.fogColor=15658734,e.clearColor=15658734,e}return Object(l["a"])(n,e),Object(s["a"])(n,[{key:"mounted",value:function(){this.canvas=document.getElementById("canvas"),this.context=this.canvas.getContext("webgl"),this.context&&(this.cameraDistance=Math.max(window.innerWidth,window.innerHeight),this.far=10*this.cameraDistance,console.log("cameraDistance: "+this.cameraDistance+" far:"+this.far),this.init())}},{key:"init",value:function(){this.initScene(),this.initCamera(),this.initRender(),this.initLight(),this.initControl(),this.initGltf(),this.initUI(),this.initWindowResizeEvent(),this.initAnimate()}},{key:"initStats",value:function(){}},{key:"initScene",value:function(){this.sceneBg=new m["ub"];var e=this,n=new m["Ib"];n.load("./images/skybox/4k.png",function(n){n.magFilter=m["V"],n.minFilter=m["V"],n.anisotropy=4;var t=m["vb"].equirect,i=new m["wb"]({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,depthWrite:!1,precision:"highp",side:m["e"]});i.uniforms.tEquirect.value=n;var a=new m["g"](1,1,1);e.meshBg=new m["R"](a,i),e.sceneBg.add(e.meshBg)},function(e){console.log(e.loaded/e.total*100+"% loaded")},function(e){console.log("An error happened")}),this.scene3D=new m["ub"],this.scene2D=new m["ub"]}},{key:"initCamera",value:function(){var e=this.calcFov(this.cameraDistance,window.innerWidth,window.innerWidth/window.innerHeight);this.camera3D=new m["jb"](e,window.innerWidth/window.innerHeight,this.near,this.far),this.camera3D.position.set(0,this.cameraDistance/2,this.cameraDistance),this.camera3D.lookAt(new m["Nb"](0,0,0)),this.camera3D.updateProjectionMatrix(),this.camera2D=new m["hb"](0,window.innerWidth,window.innerHeight,0,this.near,this.far),this.camera2D.position.set(0,0,this.cameraDistance),this.camera2D.lookAt(new m["Nb"](0,0,0)),this.camera2D.updateProjectionMatrix()}},{key:"initRender",value:function(){this.renderer3D=new m["Rb"]({canvas:this.canvas,context:this.context,antialias:!0,powerPreference:"high-performance"}),this.renderer3D.autoClearColor=!1,this.renderer3D.setClearColor(this.clearColor,1),this.renderer3D.setSize(window.innerWidth,window.innerHeight,!0),this.renderer3D.setPixelRatio(window.devicePixelRatio),this.renderer3D.shadowMap.enabled=!0,this.renderer3D.shadowMap.type=m["ib"],document.body.appendChild(this.renderer3D.domElement)}},{key:"initWindowResizeEvent",value:function(){var e=this;window.onresize=function(){e.cameraDistance=Math.max(window.innerWidth,window.innerHeight),e.far=10*e.cameraDistance,console.log("cameraDistance: "+e.cameraDistance+" far:"+e.far),e.camera3D.fov=e.calcFov(e.cameraDistance,window.innerWidth,window.innerWidth/window.innerHeight),e.camera3D.aspect=window.innerWidth/window.innerHeight,e.camera3D.updateProjectionMatrix(),e.camera2D.left=0,e.camera2D.right=window.innerWidth,e.camera2D.top=window.innerHeight,e.camera2D.bottom=0,e.camera2D.updateProjectionMatrix(),e.logo&&e.logo.material&&e.logo.material.map&&e.logo.position.set(.05*window.innerWidth+e.logo.material.map.image.width/2,.95*window.innerHeight-e.logo.material.map.image.height/2,1),e.renderer3D.setSize(window.innerWidth,window.innerHeight,!0)}}},{key:"initLight",value:function(){var e=new m["c"](15658734,.75);this.scene3D.add(e);var n=new m["kb"](15658734,1,1e3,1.5);n.castShadow=!0,n.shadow.mapSize.width=512,n.shadow.mapSize.height=512,n.shadow.camera.near=this.near,n.shadow.camera.far=this.far,n.position.set(100,400,300),this.scene3D.add(n)}},{key:"initControl",value:function(){this.controls=new f["a"](this.camera3D,this.renderer3D.domElement),this.controls.minDistance=.5*this.cameraDistance,this.controls.maxDistance=5*this.cameraDistance,this.controls.minPolarAngle=2*-Math.PI,this.controls.maxPolarAngle=2*Math.PI,this.controls.minAzimuthAngle=2*-Math.PI,this.controls.maxAzimuthAngle=2*Math.PI,this.controls.zoomSpeed=2,this.controls.rotateSpeed=1,this.controls.panSpeed=1,this.controls.autoRotate=!0,this.controls.autoRotateSpeed=1}},{key:"initGltf",value:function(){var e=new w["a"],n=this;e.load("./models/gltf/scene.gltf",function(e){var t=e.scene;t.scale.set(30,30,30);var i=!0,a=!1,r=void 0;try{for(var o,s=t.children[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var c=o.value;"RootNode_(gltf_orientation_matrix)"===c.name&&(c.castShadow=!0,c.receiveShadow=!0)}}catch(h){a=!0,r=h}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}n.scene3D.add(t),n.gltfHander=function(){}},function(e){console.log(e.loaded/e.total*100+"% loaded")},function(e){console.log("An error happened")})}},{key:"initUI",value:function(){var e=new m["Ib"],n=this;e.load("./images/jiji.png",function(e){e.magFilter=m["V"],e.minFilter=m["V"],e.anisotropy=4;var t=new m["Cb"]({map:e,transparent:!0,precision:"highp",side:m["n"]}),i=e.image.width,a=e.image.height;n.logo=new m["Bb"](t),n.logo.scale.set(i,a,1),n.logo.position.set(.05*window.innerWidth+i/2,.95*window.innerHeight-a/2,1),n.scene2D.add(n.logo)},function(e){console.log(e.loaded/e.total*100+"% loaded")},function(e){console.log("An error happened")})}},{key:"initAnimate",value:function(){var e=this;this.animate=function(){e.renderer3D.clear(),e.controls.update(),e.gltfHander&&e.gltfHander(),e.meshBg&&e.meshBg.position.copy(e.camera3D.position),e.renderer3D.render(e.sceneBg,e.camera3D),e.renderer3D.render(e.scene3D,e.camera3D),e.renderer3D.clearDepth(),e.renderer3D.render(e.scene2D,e.camera2D),requestAnimationFrame(e.animate)},this.animate()}},{key:"calcFov",value:function(e,n,t){return t<1&&(n/=t),2*Math.atan(n/2/e)*(180/Math.PI)}}]),n}(u["b"]);p=d["a"]([u["a"]],p);var g=p,v=g,D=(t("7c55"),t("2877")),b=Object(D["a"])(v,a,r,!1,null,null,null),y=b.exports,x=t("2f62");i["a"].use(x["a"]);var S=new x["a"].Store({state:{},mutations:{},actions:{}});i["a"].config.productionTip=!1,new i["a"]({store:S,render:function(e){return e(y)}}).$mount("#app")}});
//# sourceMappingURL=app.3f8263c6.js.map